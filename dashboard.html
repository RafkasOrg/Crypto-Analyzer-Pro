<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard - Crypto Analyzer Pro</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
  <style>
    /* GLOBAL STYLES */
    :root {
      --primary-color: #D4AF37;
      --secondary-color: #B980F0;
      --positive-color: #4ade80;
      --negative-color: #f87171;
      --background-dark: #121212;
      --card-background: #1a1a1a;
      --text-color: #e5e5e5;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      transition: all 0.3s ease;
    }
    
    body {
      font-family: 'Inter', sans-serif;
      background: var(--background-dark);
      color: var(--text-color);
      line-height: 1.6;
      padding: 20px;
      min-height: 100vh;
    }
    
    .container {
      max-width: 1400px;
      margin: 0 auto;
    }
    
    /* SIDEBAR */
    .sidebar {
      width: 280px;
      background: var(--card-background);
      border-radius: 16px;
      border: 1px solid #333;
      padding: 25px 20px;
      height: calc(100vh - 40px);
      position: fixed;
      overflow-y: auto;
    }
    
    .logo {
      display: flex;
      align-items: center;
      margin-bottom: 30px;
      padding: 0 5px;
    }
    
    .logo-icon {
      font-size: 1.8rem;
      margin-right: 10px;
      background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    .logo-text {
      font-family: 'Orbitron', sans-serif;
      font-size: 1.5rem;
      background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 
        0 0 10px rgba(212, 175, 55, 0.7),
        0 0 20px rgba(185, 128, 240, 0.5),
        0 0 30px rgba(185, 128, 240, 0.3);
    }
    
    .nav-menu {
      list-style: none;
    }
    
    .nav-item {
      margin-bottom: 8px;
    }
    
    .nav-link {
      display: flex;
      align-items: center;
      padding: 12px 15px;
      border-radius: 10px;
      color: #ccc;
      text-decoration: none;
      transition: all 0.3s;
      font-weight: 500;
    }
    
    .nav-link:hover {
      background: rgba(212, 175, 55, 0.1);
      color: var(--text-color);
    }
    
    .nav-link.active {
      background: var(--primary-color);
      color: #0a0a0a;
      font-weight: 600;
    }
    
    .nav-link i {
      margin-right: 12px;
      font-size: 1.2rem;
    }
    
    /* MAIN CONTENT */
    .main-content {
      margin-left: 310px;
      padding: 20px 0;
    }
    
    .page-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 25px;
    }
    
    .page-title {
      font-family: 'Orbitron', sans-serif;
      font-size: 2rem;
      background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 
        0 0 10px rgba(212, 175, 55, 0.7),
        0 0 20px rgba(185, 128, 240, 0.5),
        0 0 30px rgba(185, 128, 240, 0.3);
    }
    
    .header-controls {
      display: flex;
      align-items: center;
      gap: 15px;
    }
    
    .btn-notification {
      background: var(--card-background);
      border: 1px solid #333;
      color: #ccc;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .btn-notification:hover {
      background: rgba(212, 175, 55, 0.1);
    }
    
    .notification-badge {
      position: absolute;
      top: 5px;
      right: 5px;
      background: var(--negative-color);
      color: white;
      font-size: 0.7rem;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .user-profile {
      display: flex;
      align-items: center;
    }
    
    .user-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: var(--primary-color);
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 10px;
      font-weight: bold;
    }
    
    .user-info {
      margin-right: 15px;
    }
    
    .user-name {
      font-weight: 600;
      font-size: 0.9rem;
    }
    
    .user-tier {
      font-size: 0.75rem;
      background: rgba(185, 128, 240, 0.2);
      color: var(--secondary-color);
      padding: 2px 8px;
      border-radius: 10px;
    }
    
    .btn-logout {
      background: none;
      border: none;
      color: #ccc;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .btn-logout:hover {
      color: var(--text-color);
    }
    
    /* NOTIFICATION PANEL */
    .notification-panel {
      position: absolute;
      top: 60px;
      right: 20px;
      width: 350px;
      background: var(--card-background);
      border-radius: 12px;
      border: 1px solid #333;
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
      z-index: 100;
      display: none;
      max-height: 60vh;
      overflow-y: auto;
    }
    
    .panel-header {
      padding: 15px 20px;
      border-bottom: 1px solid #333;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .panel-header h3 {
      font-family: 'Orbitron', sans-serif;
      font-size: 1.3rem;
      color: var(--primary-color);
    }
    
    .notification-list {
      padding: 10px 0;
    }
    
    .notification-item {
      padding: 12px 20px;
      border-bottom: 1px solid #222;
      display: flex;
      align-items: flex-start;
      gap: 10px;
      cursor: pointer;
    }
    
    .notification-item:hover {
      background: rgba(212, 175, 55, 0.05);
    }
    
    .notification-item.new {
      background: rgba(212, 175, 55, 0.05);
    }
    
    .notification-icon {
      font-size: 1.5rem;
      margin-top: 3px;
    }
    
    .notification-icon.positive {
      color: var(--positive-color);
    }
    
    .notification-icon.negative {
      color: var(--negative-color);
    }
    
    .notification-content {
      flex: 1;
    }
    
    .notification-title {
      font-weight: 600;
      margin-bottom: 3px;
    }
    
    .notification-time {
      font-size: 0.8rem;
      color: #ccc;
    }
    
    /* MARKET FUNDAMENTALS */
    .market-fundamentals {
      background: var(--background-dark);
      border-radius: 16px;
      border: 1px solid #333;
      padding: 25px;
      margin-bottom: 30px;
      position: relative;
      overflow: hidden;
    }
    
    .market-fundamentals::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
    }
    
    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
    
    .section-header h2 {
      font-family: 'Orbitron', sans-serif;
      font-size: 1.8rem;
      background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      text-shadow: 
        0 0 10px rgba(212, 175, 55, 0.7),
        0 0 20px rgba(185, 128, 240, 0.5),
        0 0 30px rgba(185, 128, 240, 0.3);
    }
    
    .source-badge {
      background: var(--card-background);
      color: #ccc;
      padding: 5px 12px;
      border-radius: 20px;
      font-size: 0.85rem;
      border: 1px solid #333;
    }
    
    /* Filter Bar */
    .filter-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      flex-wrap: wrap;
      gap: 15px;
    }
    
    .filter-group {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }
    
    .filter-btn {
      background: var(--card-background);
      border: 1px solid #333;
      color: #ccc;
      padding: 8px 15px;
      border-radius: 20px;
      cursor: pointer;
      transition: all 0.3s;
      font-family: 'Inter', sans-serif;
      font-size: 0.9rem;
    }
    
    .filter-btn:hover {
      background: #222;
    }
    
    .filter-btn.active {
      background: var(--primary-color);
      color: #0a0a0a;
      border-color: var(--primary-color);
      font-weight: bold;
    }
    
    .search-bar {
      position: relative;
      width: 250px;
    }
    
    .search-bar input {
      width: 100%;
      padding: 10px 15px 10px 35px;
      background: var(--card-background);
      border: 1px solid #333;
      border-radius: 20px;
      color: var(--text-color);
      font-family: 'Inter', sans-serif;
    }
    
    .search-bar .search-icon {
      position: absolute;
      left: 12px;
      top: 50%;
      transform: translateY(-50%);
      color: #ccc;
    }
    
    /* ===== CSS KHUSUS UNTUK TABEL - 100% BERSIH DAN TANPA KONFLIK ===== */
    .fundamentals-grid {
      width: 100%;
      overflow-x: auto;
      border-radius: 12px;
      border: 1px solid #333;
      margin-bottom: 25px;
      background: var(--card-background);
      min-width: 1000px;
    }
    
    .grid-header {
      display: flex;
      background: var(--card-background);
      border-bottom: 1px solid #333;
    }
    
    .grid-body {
      min-height: 300px;
    }
    
    .grid-row {
      display: flex;
      padding: 12px 0;
      border-bottom: 1px solid #222;
      transition: background 0.2s;
      align-items: center;
    }
    
    .grid-row:hover {
      background: rgba(212, 175, 55, 0.05);
    }
    
    .header-cell, .cell {
      padding: 12px 15px;
    }
    
    .header-cell {
      font-weight: 600;
      color: var(--primary-color);
      border-bottom: 1px solid #333;
    }
    
    /* ===== SUSUNAN KOLOM YANG SEMPURNA - TIDAK TERLALU KE KANAN ===== */
    .rank {
      width: 50px;
      min-width: 50px;
      max-width: 50px;
      text-align: center;
      padding: 0 8px;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    
    .coin {
      flex: 2;
      min-width: 250px;
      max-width: 300px;
      padding-left: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .price {
      width: 140px;
      min-width: 140px;
      max-width: 140px;
      padding-right: 8px;
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 2px;
    }
    
    .change-24h {
      width: 90px;
      min-width: 90px;
      max-width: 90px;
      padding-right: 8px;
      display: flex;
      justify-content: flex-end;
      align-items: center;
    }
    
    .market-cap {
      width: 160px;
      min-width: 160px;
      max-width: 160px;
      padding-right: 8px;
      display: flex;
      justify-content: flex-end;
      align-items: center;
    }
    
    .volume {
      width: 160px;
      min-width: 160px;
      max-width: 160px;
      padding-right: 8px;
      display: flex;
      justify-content: flex-end;
      align-items: center;
    }
    
    .dev-score, .community {
      width: 80px;
      min-width: 80px;
      max-width: 80px;
      padding-right: 8px;
      display: flex;
      justify-content: flex-end;
      align-items: center;
    }
    
    /* ===== PERBAIKAN KHUSUS UNTUK PRICE ===== */
    .price .price-current {
      font-weight: bold;
      color: var(--primary-color);
      width: 100%;
      text-align: right;
    }
    
    .price .price-change {
      font-size: 0.85rem;
      width: 100%;
      text-align: right;
    }
    
    /* ===== KOIN STYLING ===== */
    .coin-icon {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      background: var(--card-background);
      border: 1px solid #333;
      flex-shrink: 0;
    }
    
    .coin-name {
      font-weight: 600;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    
    .coin-symbol {
      font-size: 0.8rem;
      color: #ccc;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    
    /* ===== MARKET OVERVIEW ===== */
    .market-overview {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
    }
    
    .overview-item {
      background: var(--card-background);
      border-radius: 12px;
      padding: 15px;
      border: 1px solid #333;
    }
    
    .overview-label {
      color: #ccc;
      font-size: 0.9rem;
      margin-bottom: 5px;
    }
    
    .overview-value {
      font-family: 'Orbitron', sans-serif;
      font-size: 1.5rem;
      margin-bottom: 5px;
    }
    
    /* ===== AI COIN RATING ===== */
    .ai-coin-rating {
      background: var(--background-dark);
      border-radius: 16px;
      border: 1px solid #333;
      padding: 25px;
      margin-bottom: 30px;
      position: relative;
      overflow: hidden;
    }
    
    .ai-coin-rating::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, #4ade80, #10b981);
    }
    
    .ai-rating-grid {
      width: 100%;
      overflow-x: auto;
      border-radius: 12px;
      border: 1px solid #333;
      margin-bottom: 25px;
      background: var(--card-background);
      min-width: 800px;
    }
    
    .ai-rating-header, .ai-rating-row {
      display: flex;
    }
    
    .ai-rating-header {
      background: var(--card-background);
      border-bottom: 1px solid #333;
    }
    
    .ai-rating-row {
      padding: 12px 0;
      border-bottom: 1px solid #222;
    }
    
    .ai-rating-row:hover {
      background: rgba(74, 222, 128, 0.05);
    }
    
    .header-cell, .cell {
      padding: 12px 15px;
    }
    
    .header-cell {
      font-weight: 600;
      color: var(--positive-color);
      border-bottom: 1px solid #333;
    }
    
    /* Susunan kolom AI Rating */
    .rank {
      width: 50px;
      min-width: 50px;
      text-align: center;
    }
    
    .coin {
      flex: 1;
      min-width: 200px;
    }
    
    .score {
      width: 120px;
      min-width: 120px;
      text-align: right;
    }
    
    .prediction {
      width: 120px;
      min-width: 120px;
      text-align: center;
    }
    
    .confidence {
      width: 150px;
      min-width: 150px;
    }
    
    .potential {
      width: 120px;
      min-width: 120px;
      text-align: center;
    }
    
    /* Warna untuk prediksi */
    .prediction.bullish {
      color: var(--positive-color);
      font-weight: bold;
    }
    
    .prediction.neutral {
      color: var(--primary-color);
    }
    
    .prediction.bearish {
      color: var(--negative-color);
      font-weight: bold;
    }
    
    /* Warna untuk potensi */
    .potential.high, .potential.very-high {
      color: var(--positive-color);
      font-weight: bold;
    }
    
    .potential.medium {
      color: var(--primary-color);
    }
    
    .potential.low {
      color: var(--negative-color);
      font-weight: bold;
    }
    
    /* Confidence bar */
    .confidence-bar {
      width: 100px;
      height: 6px;
      background: #333;
      border-radius: 3px;
      overflow: hidden;
      margin: 0 auto 4px;
    }
    
    .confidence-fill {
      height: 100%;
      border-radius: 3px;
      background: var(--positive-color);
    }
    
    /* ===== BAD WALLET TRACKER ===== */
    .bad-wallet-tracker {
      background: var(--background-dark);
      border-radius: 16px;
      border: 1px solid #333;
      padding: 25px;
      margin-bottom: 30px;
      position: relative;
      overflow: hidden;
    }
    
    .bad-wallet-tracker::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, var(--negative-color), #ef4444);
    }
    
    .wallet-grid {
      width: 100%;
      overflow-x: auto;
      border-radius: 12px;
      border: 1px solid #333;
      margin-bottom: 25px;
      background: var(--card-background);
      min-width: 800px;
    }
    
    .wallet-header, .wallet-row {
      display: flex;
    }
    
    .wallet-header {
      background: var(--card-background);
      border-bottom: 1px solid #333;
    }
    
    .wallet-row {
      padding: 12px 0;
      border-bottom: 1px solid #222;
    }
    
    .wallet-row:hover {
      background: rgba(248, 113, 113, 0.05);
    }
    
    /* Susunan kolom Bad Wallet Tracker */
    .wallet-address {
      flex: 2;
      min-width: 250px;
      position: relative;
    }
    
    .type {
      width: 150px;
      min-width: 150px;
    }
    
    .risk {
      width: 120px;
      min-width: 120px;
    }
    
    .activity {
      width: 150px;
      min-width: 150px;
    }
    
    .status {
      width: 120px;
      min-width: 120px;
    }
    
    /* Warna untuk risiko */
    .risk.high {
      color: var(--negative-color);
      font-weight: bold;
    }
    
    .risk.medium {
      color: var(--primary-color);
    }
    
    .risk.low {
      color: var(--positive-color);
    }
    
    /* Status indicator */
    .status-indicator {
      display: inline-block;
      width: 10px;
      height: 10px;
      border-radius: 50%;
      margin-right: 5px;
    }
    
    .status-indicator.active {
      background: var(--positive-color);
      box-shadow: 0 0 5px var(--positive-color);
    }
    
    .status-indicator.inactive {
      background: #666;
    }
    
    /* Copy icon */
    .copy-icon {
      display: inline-block;
      margin-left: 5px;
      cursor: pointer;
      opacity: 0.5;
      transition: opacity 0.2s;
    }
    
    .copy-icon:hover {
      opacity: 1;
    }
    
    /* ===== ON-CHAIN ANALYTICS ===== */
    .on-chain-analytics {
      background: var(--background-dark);
      border-radius: 16px;
      border: 1px solid #333;
      padding: 25px;
      margin-bottom: 30px;
      position: relative;
      overflow: hidden;
    }
    
    .on-chain-analytics::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, var(--secondary-color), #a78bfa);
    }
    
    .analytics-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 20px;
    }
    
    .analytics-card {
      background: var(--card-background);
      border-radius: 12px;
      border: 1px solid #333;
      padding: 20px;
    }
    
    .analytics-card.full-width {
      grid-column: 1 / -1;
    }
    
    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }
    
    .card-header h3 {
      font-family: 'Orbitron', sans-serif;
      font-size: 1.3rem;
      background: linear-gradient(45deg, var(--secondary-color), #a78bfa);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    
    .update-time {
      font-size: 0.8rem;
      color: #ccc;
    }
    
    /* Whale Activity */
    .whale-list {
      min-height: 180px;
    }
    
    .whale-item {
      display: flex;
      align-items: center;
      padding: 10px 0;
      border-bottom: 1px solid #222;
    }
    
    .whale-item:last-child {
      border-bottom: none;
    }
    
    .whale-icon {
      font-size: 1.2rem;
      margin-right: 10px;
      width: 24px;
    }
    
    .whale-item.buy .whale-icon {
      color: var(--positive-color);
    }
    
    .whale-item.sell .whale-icon {
      color: var(--negative-color);
    }
    
    .whale-info {
      flex: 1;
    }
    
    .whale-wallet {
      font-weight: 600;
      margin-bottom: 3px;
    }
    
    .whale-transaction {
      font-size: 0.9rem;
      color: #ccc;
    }
    
    .whale-time {
      font-size: 0.85rem;
      color: #ccc;
      min-width: 80px;
      text-align: right;
    }
    
    /* Large Transactions */
    .transaction-list {
      min-height: 180px;
    }
    
    .transaction-item {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr 1fr 1fr;
      gap: 5px;
      padding: 10px 0;
      border-bottom: 1px solid #222;
      font-size: 0.85rem;
    }
    
    .transaction-item:last-child {
      border-bottom: none;
    }
    
    .transaction-hash {
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    
    .transaction-from, .transaction-to {
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    
    .transaction-amount {
      font-weight: 600;
    }
    
    .transaction-time {
      text-align: right;
      color: #ccc;
    }
    
    /* View More */
    .view-more {
      text-align: right;
      margin-top: 15px;
    }
    
    .view-more a {
      color: var(--primary-color);
      text-decoration: none;
      font-weight: 500;
      transition: all 0.2s;
    }
    
    .view-more a:hover {
      text-decoration: underline;
      color: var(--secondary-color);
    }
    
    /* ===== AUTO-TRADING ===== */
    .auto-trading {
      background: var(--background-dark);
      border-radius: 16px;
      border: 1px solid #333;
      padding: 25px;
      margin-bottom: 30px;
      position: relative;
      overflow: hidden;
    }
    
    .auto-trading::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, #3b82f6, #1d4ed8);
    }
    
    .trading-controls {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      flex-wrap: wrap;
      gap: 15px;
    }
    
    .status-indicator {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .status-light {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background-color: #666;
    }
    
    #trading-status-text {
      font-weight: 500;
    }
    
    .btn-toggle {
      background: var(--card-background);
      border: 1px solid #333;
      color: var(--text-color);
      padding: 8px 20px;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s;
      font-weight: 500;
    }
    
    .btn-toggle:hover {
      background: #222;
    }
    
    .btn-toggle.active {
      background: var(--positive-color);
      color: #0a0a0a;
      border-color: var(--positive-color);
    }
    
    .trading-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 20px;
    }
    
    .trading-card {
      background: var(--card-background);
      border-radius: 12px;
      border: 1px solid #333;
      padding: 20px;
    }
    
    .trading-card.full-width {
      grid-column: 1 / -1;
    }
    
    /* Sinyal Trading */
    .signal-list {
      min-height: 200px;
    }
    
    .signal-item {
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 15px;
      border-left: 4px solid;
    }
    
    .signal-item.buy {
      border-color: var(--positive-color);
      background: rgba(74, 222, 128, 0.05);
    }
    
    .signal-item.hold {
      border-color: var(--primary-color);
      background: rgba(212, 175, 55, 0.05);
    }
    
    .signal-item.sell {
      border-color: var(--negative-color);
      background: rgba(248, 113, 113, 0.05);
    }
    
    .signal-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 8px;
    }
    
    .signal-coin {
      font-weight: 600;
      font-size: 1.1rem;
    }
    
    .signal-strength {
      font-size: 0.85rem;
      color: #ccc;
    }
    
    .signal-content {
      padding-left: 5px;
    }
    
    .signal-type {
      font-weight: bold;
      font-size: 1.2rem;
      margin-bottom: 5px;
    }
    
    .signal-reason {
      font-size: 0.9rem;
      color: #ccc;
      margin-bottom: 5px;
    }
    
    .signal-confidence {
      font-size: 0.85rem;
      color: #ccc;
    }
    
    /* Trading Aktif */
    .trade-list {
      min-height: 200px;
    }
    
    .no-trades {
      text-align: center;
      padding: 20px 0;
      color: #ccc;
    }
    
    .no-trades-sub {
      font-size: 0.9rem;
      margin-top: 5px;
      color: #999;
    }
    
    .trade-item {
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 15px;
      background: rgba(59, 130, 246, 0.05);
      border: 1px solid #333;
    }
    
    .trade-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 8px;
    }
    
    .trade-coin {
      font-weight: 600;
      font-size: 1.1rem;
    }
    
    .trade-profit {
      font-weight: bold;
    }
    
    .trade-profit.positive {
      color: var(--positive-color);
    }
    
    .trade-profit.negative {
      color: var(--negative-color);
    }
    
    .trade-details {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 5px;
      font-size: 0.85rem;
      color: #ccc;
    }
    
    /* PERSONALISASI DASHBOARD */
    .personalize-panel {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 500px;
      max-width: 90%;
      background: var(--card-background);
      border-radius: 16px;
      border: 1px solid #333;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
      z-index: 1000;
      display: none;
    }
    
    .panel-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px;
      border-bottom: 1px solid #333;
    }
    
    .panel-header h3 {
      font-family: 'Orbitron', sans-serif;
      font-size: 1.5rem;
      color: var(--primary-color);
    }
    
    #close-personalize {
      background: none;
      border: none;
      color: #ccc;
      font-size: 1.2rem;
      cursor: pointer;
      width: 24px;
      height: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .personalize-options {
      padding: 20px;
      max-height: 60vh;
      overflow-y: auto;
    }
    
    .option-group {
      margin-bottom: 25px;
    }
    
    .option-group h4 {
      font-family: 'Orbitron', sans-serif;
      font-size: 1.2rem;
      color: var(--primary-color);
      margin-bottom: 15px;
    }
    
    .option-item {
      padding: 8px 0;
    }
    
    .coin-search {
      position: relative;
      margin-bottom: 15px;
    }
    
    .coin-search input {
      width: 100%;
      padding: 8px 12px 8px 30px;
      background: #222;
      border: 1px solid #333;
      border-radius: 8px;
      color: var(--text-color);
    }
    
    .coin-search .search-icon {
      position: absolute;
      left: 10px;
      top: 50%;
      transform: translateY(-50%);
      color: #ccc;
    }
    
    .coin-list {
      max-height: 200px;
      overflow-y: auto;
    }
    
    .coin-item {
      padding: 8px 0;
      display: flex;
      align-items: center;
    }
    
    .coin-item input {
      margin-right: 8px;
    }
    
    .module-list {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
    }
    
    .module-item {
      padding: 5px 0;
    }
    
    .panel-footer {
      display: flex;
      justify-content: space-between;
      padding: 15px 20px;
      border-top: 1px solid #333;
    }
    
    .btn-secondary {
      background: var(--card-background);
      border: 1px solid #333;
      color: var(--text-color);
      padding: 8px 20px;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .btn-secondary:hover {
      background: #222;
    }
    
    /* Loading State */
    .loading-state {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 300px;
      color: #ccc;
    }
    
    .loading-spinner {
      width: 40px;
      height: 40px;
      border: 4px solid rgba(212, 175, 55, 0.3);
      border-top: 4px solid var(--primary-color);
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-bottom: 15px;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    /* Error State */
    .error-state {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 300px;
      color: var(--text-color);
    }
    
    .error-icon {
      font-size: 2.5rem;
      margin-bottom: 15px;
      color: var(--negative-color);
    }
    
    .error-message {
      font-size: 1.1rem;
      margin-bottom: 20px;
      text-align: center;
      max-width: 400px;
    }
    
    .btn-retry {
      background: var(--primary-color);
      color: #0a0a0a;
      border: none;
      padding: 8px 20px;
      border-radius: 20px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .btn-retry:hover {
      opacity: 0.9;
      transform: translateY(-2px);
    }
    
    /* No Results State */
    .no-results {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 200px;
      color: #ccc;
    }
    
    .no-results-icon {
      font-size: 2.5rem;
      margin-bottom: 10px;
    }
    
    .no-results-message {
      font-size: 1.1rem;
      text-align: center;
      max-width: 300px;
    }
    
    /* Error Banner */
    .error-banner {
      display: flex;
      align-items: center;
      background: rgba(248, 113, 113, 0.1);
      border-left: 4px solid var(--negative-color);
      padding: 10px 15px;
      margin-bottom: 20px;
      border-radius: 4px;
    }
    
    .error-banner .error-icon {
      margin-right: 10px;
      font-size: 1.2rem;
    }
    
    /* Footer */
    .footer {
      text-align: center;
      padding: 20px 0;
      color: #666;
      font-size: 0.9rem;
      margin-top: 20px;
    }
    
    .footer a {
      color: var(--primary-color);
      text-decoration: none;
    }
    
    /* Responsive */
    @media (max-width: 1200px) {
      .sidebar {
        width: 240px;
      }
      
      .main-content {
        margin-left: 270px;
      }
      
      /* Responsif untuk kolom */
      .price, .change-24h, .market-cap, .volume {
        width: 140px;
        min-width: 140px;
        max-width: 140px;
      }
      
      .coin {
        min-width: 200px;
      }
    }
    
    @media (max-width: 992px) {
      .sidebar {
        width: 80px;
        padding: 25px 10px;
      }
      
      .logo-text, .nav-link span, .user-info {
        display: none;
      }
      
      .logo, .user-profile {
        justify-content: center;
      }
      
      .nav-link {
        justify-content: center;
        padding: 12px;
      }
      
      .main-content {
        margin-left: 110px;
      }
      
      /* Responsif untuk kolom */
      .fundamentals-grid {
        min-width: 800px;
      }
      
      .price {
        width: 120px;
        min-width: 120px;
        max-width: 120px;
      }
      
      .change-24h {
        width: 85px;
        min-width: 85px;
        max-width: 85px;
      }
      
      .market-cap, .volume {
        width: 150px;
        min-width: 150px;
        max-width: 150px;
      }
      
      .coin {
        min-width: 150px;
      }
    }
    
    @media (max-width: 768px) {
      .sidebar {
        position: fixed;
        z-index: 100;
        height: 100vh;
      }
      
      .main-content {
        margin-left: 0;
      }
      
      .filter-bar {
        flex-direction: column;
      }
      
      .search-bar {
        width: 100%;
      }
      
      .fundamentals-grid {
        min-width: 600px;
      }
      
      .price, .change-24h, .market-cap, .volume, .dev-score, .community {
        width: 100px;
        min-width: 100px;
        max-width: 100px;
      }
      
      .coin {
        min-width: 120px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- SIDEBAR -->
    <div class="sidebar">
      <div class="logo">
        <div class="logo-icon">📊</div>
        <div class="logo-text">Crypto Analyzer Pro</div>
      </div>
      <ul class="nav-menu">
        <li class="nav-item">
          <a href="#" class="nav-link active">
            <i>📊</i>
            <span>Market Fundamentals</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="on-chain.html" class="nav-link">
            <i>⛓️</i>
            <span>On-Chain Analytics</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="bad-wallet.html" class="nav-link">
            <i>🚨</i>
            <span>Bad Wallet Tracker</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="ai-rating.html" class="nav-link">
            <i>⭐</i>
            <span>AI Coin Rating</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="auto-trading.html" class="nav-link">
            <i>🤖</i>
            <span>Auto-Trading</span>
          </a>
        </li>
        <li class="nav-item">
          <a href="settings.html" class="nav-link">
            <i>⚙️</i>
            <span>Pengaturan</span>
          </a>
        </li>
      </ul>
      <div class="user-section" style="margin-top: auto; padding-top: 20px; border-top: 1px solid #333;">
        <div class="user-profile">
          <div class="user-avatar">R</div>
          <div class="user-info">
            <div class="user-name">Razia Tech</div>
            <div class="user-tier">Pro User</div>
          </div>
          <button class="btn-logout">Keluar</button>
        </div>
      </div>
    </div>
    
    <!-- MAIN CONTENT -->
    <div class="main-content">
      <div class="page-header">
        <h1 class="page-title">Dashboard Analisis Crypto</h1>
        <div class="header-controls">
          <button class="btn-notification" id="notification-btn">
            <i>🔔</i>
            <span class="notification-badge" id="notification-count">3</span>
          </button>
          <div class="user-profile">
            <div class="user-avatar">R</div>
            <div class="user-info">
              <div class="user-name">Razia Tech</div>
              <div class="user-tier">Pro User</div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- NOTIFICATION PANEL -->
      <div class="notification-panel" id="notification-panel">
        <div class="panel-header">
          <h3>Notifikasi</h3>
          <button id="mark-all-read">Tandai semua telah dibaca</button>
        </div>
        <div class="notification-list">
          <div class="notification-item new">
            <div class="notification-icon positive">📈</div>
            <div class="notification-content">
              <div class="notification-title">Bitcoin Meningkat 5%</div>
              <div class="notification-message">Harga BTC naik lebih dari 5% dalam 24 jam terakhir</div>
              <div class="notification-time">5 menit lalu</div>
            </div>
          </div>
          <div class="notification-item new">
            <div class="notification-icon positive">📈</div>
            <div class="notification-content">
              <div class="notification-title">Ethereum Breakout</div>
              <div class="notification-message">ETH telah menembus resistance utama di $3,500</div>
              <div class="notification-time">15 menit lalu</div>
            </div>
          </div>
          <div class="notification-item">
            <div class="notification-icon negative">📉</div>
            <div class="notification-content">
              <div class="notification-title">Solana Menurun</div>
              <div class="notification-message">SOL mengalami penurunan tajam sebesar 8% dalam 1 jam terakhir</div>
              <div class="notification-time">45 menit lalu</div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- MARKET FUNDAMENTALS SECTION -->
      <div class="market-fundamentals">
        <div class="section-header">
          <h2>Market Fundamentals</h2>
          <div class="source-badge">Source: CoinGecko, Dune, LunarCrush</div>
        </div>
        <div class="filter-bar">
          <div class="filter-group">
            <button class="filter-btn active" data-filter="trending">Trending</button>
            <button class="filter-btn" data-filter="new">New Listings</button>
            <button class="filter-btn" data-filter="dev">Developer Score</button>
            <button class="filter-btn" data-filter="tokenomics">Tokenomics</button>
          </div>
          <div class="search-bar">
            <input type="text" id="coin-search" placeholder="Cari coin...">
            <span class="search-icon">🔍</span>
          </div>
        </div>
        <div class="fundamentals-grid">
          <div class="grid-header">
            <div class="header-cell rank">#</div>
            <div class="header-cell coin">Coin</div>
            <div class="header-cell price">Price</div>
            <div class="header-cell change-24h">24h</div>
            <div class="header-cell market-cap">Market Cap</div>
            <div class="header-cell volume">Volume</div>
            <div class="header-cell dev-score">Dev</div>
            <div class="header-cell community">Community</div>
          </div>
          <div class="grid-body">
            <div class="loading-state">
              <div class="loading-spinner"></div>
              <div>Mengambil data pasar real-time...</div>
            </div>
          </div>
        </div>
        <div class="market-overview">
          <div class="overview-item">
            <div class="overview-label">Total Market Cap</div>
            <div class="overview-value" id="total-market-cap">$2.85T</div>
            <div class="overview-change positive" id="market-cap-change">+2.3%</div>
          </div>
          <div class="overview-item">
            <div class="overview-label">24h Volume</div>
            <div class="overview-value" id="total-volume">$124B</div>
            <div class="overview-change negative" id="volume-change">-1.7%</div>
          </div>
          <div class="overview-item">
            <div class="overview-label">BTC Dominance</div>
            <div class="overview-value" id="btc-dominance">52.3%</div>
            <div class="overview-change positive" id="dominance-change">+0.5%</div>
          </div>
          <div class="overview-item">
            <div class="overview-label">Fear & Greed</div>
            <div class="overview-value" id="fear-greed" style="color: var(--positive-color);">75</div>
            <div class="overview-change" id="fear-greed-status">Greed</div>
          </div>
        </div>
      </div>
      
      <!-- AI COIN RATING SECTION -->
      <div class="ai-coin-rating">
        <div class="section-header">
          <h2>AI Coin Rating</h2>
          <div class="source-badge">Source: Machine Learning Analysis</div>
        </div>
        <div class="ai-rating-grid">
          <div class="ai-rating-header">
            <div class="header-cell rank">#</div>
            <div class="header-cell coin">Coin</div>
            <div class="header-cell score">Skor AI</div>
            <div class="header-cell prediction">Prediksi</div>
            <div class="header-cell confidence">Keyakinan</div>
            <div class="header-cell potential">Potensi</div>
          </div>
          <div class="ai-rating-body">
            <div class="loading-state">
              <div class="loading-spinner"></div>
              <div>Mengambil data analisis AI...</div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- BAD WALLET TRACKER SECTION -->
      <div class="bad-wallet-tracker">
        <div class="section-header">
          <h2>Bad Wallet Tracker</h2>
          <div class="source-badge">Source: Blockchain Monitoring</div>
        </div>
        <div class="filter-bar">
          <div class="filter-group">
            <button class="filter-btn active" data-filter="all">Semua</button>
            <button class="filter-btn" data-filter="high-risk">High Risk</button>
            <button class="filter-btn" data-filter="medium-risk">Medium Risk</button>
            <button class="filter-btn" data-filter="low-risk">Low Risk</button>
          </div>
          <div class="search-bar">
            <input type="text" id="wallet-search" placeholder="Cari wallet...">
            <span class="search-icon">🔍</span>
          </div>
        </div>
        <div class="wallet-grid">
          <div class="wallet-header">
            <div class="header-cell wallet-address">Wallet</div>
            <div class="header-cell type">Tipe</div>
            <div class="header-cell risk">Risiko</div>
            <div class="header-cell activity">Aktivitas Terakhir</div>
            <div class="header-cell status">Status</div>
          </div>
          <div class="wallet-body">
            <div class="loading-state">
              <div class="loading-spinner"></div>
              <div>Mengambil data wallet berbahaya...</div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- ON-CHAIN ANALYTICS SECTION -->
      <div class="on-chain-analytics">
        <div class="section-header">
          <h2>On-Chain Analytics</h2>
          <div class="source-badge">Source: Dune Analytics, Blockchain Explorer</div>
        </div>
        
        <div class="analytics-grid">
          <!-- Whale Activity -->
          <div class="analytics-card">
            <div class="card-header">
              <h3>Whale Activity</h3>
              <div class="update-time">Diperbarui 5 menit lalu</div>
            </div>
            <div class="whale-list">
              <div class="loading-state">
                <div class="loading-spinner"></div>
                <div>Mengambil data aktivitas whale...</div>
              </div>
            </div>
            <div class="view-more">
              <a href="on-chain.html">Lihat semua aktivitas &raquo;</a>
            </div>
          </div>
          
          <!-- Large Transactions -->
          <div class="analytics-card">
            <div class="card-header">
              <h3>Transaksi Besar Terkini</h3>
              <div class="update-time">Diperbarui 2 menit lalu</div>
            </div>
            <div class="transaction-list">
              <div class="loading-state">
                <div class="loading-spinner"></div>
                <div>Mengambil data transaksi besar...</div>
              </div>
            </div>
            <div class="view-more">
              <a href="on-chain.html">Lihat semua transaksi &raquo;</a>
            </div>
          </div>
          
          <!-- Network Activity -->
          <div class="analytics-card full-width">
            <div class="card-header">
              <h3>Aktivitas Jaringan</h3>
              <div class="update-time">Diperbarui 1 menit lalu</div>
            </div>
            <div class="network-chart-container">
              <canvas id="network-chart" height="200"></canvas>
            </div>
          </div>
        </div>
      </div>
      
      <!-- AUTO-TRADING SECTION -->
      <div class="auto-trading">
        <div class="section-header">
          <h2>Smart Alerts & Auto-Trading</h2>
          <div class="source-badge">Source: AI Analysis, Market Signals</div>
        </div>
        
        <div class="trading-controls">
          <div class="status-indicator">
            <div class="status-light" id="trading-status"></div>
            <span id="trading-status-text">Auto-Trading Dimatikan</span>
          </div>
          <button class="btn-toggle" id="toggle-trading">Aktifkan Auto-Trading</button>
        </div>
        
        <div class="trading-grid">
          <!-- Trading Signals -->
          <div class="trading-card">
            <div class="card-header">
              <h3>Sinyal Trading</h3>
            </div>
            <div class="signal-list">
              <div class="loading-state">
                <div class="loading-spinner"></div>
                <div>Mengambil sinyal trading...</div>
              </div>
            </div>
          </div>
          
          <!-- Active Trades -->
          <div class="trading-card">
            <div class="card-header">
              <h3>Trading Aktif</h3>
            </div>
            <div class="trade-list">
              <div class="no-trades">
                <div>Tidak ada trading aktif</div>
                <div class="no-trades-sub">Aktifkan Auto-Trading untuk memulai</div>
              </div>
            </div>
          </div>
          
          <!-- Trading History -->
          <div class="trading-card full-width">
            <div class="card-header">
              <h3>Riwayat Trading</h3>
            </div>
            <div class="history-list">
              <div class="loading-state">
                <div class="loading-spinner"></div>
                <div>Mengambil riwayat trading...</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <div class="footer">
    Crypto Analyzer Pro © 2023 | <a href="#">Kebijakan Privasi</a> | <a href="#">Syarat & Ketentuan</a>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script>
    // Inisialisasi Supabase
    const supabaseUrl = 'https://pppcusoyjkvlsfdurgpv.supabase.co';
    const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBwcGN1c295amt2bHNmZHVyZ3B2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM5Nzk3NDAsImV4cCI6MjA2OTU1NTc0MH0.PJOY8puQcps88f0e9ZyS2-ol1Zmm6y7p8zKJSgsQcho';
    const client = supabase.createClient(supabaseUrl, supabaseKey);
    
    // Fungsi untuk verifikasi session
    async function verifySession() {
      try {
        // Cek apakah ada token di URL (untuk magic link)
        const params = new URLSearchParams(window.location.search);
        const token = params.get('token');
        const type = params.get('type');
        
        // Jika ada token, verifikasi dulu
        if (token && type === 'recovery') {
          const { data, error } = await client.auth.verifyOtp({
            token: token,
            type: 'email'
          });
          
          if (error) throw error;
          
          // Hapus token dari URL setelah verifikasi
          const newUrl = window.location.pathname;
          window.history.replaceState({}, document.title, newUrl);
        }
        
        // Cek session
        const { data, error } = await client.auth.getSession();
        
        if (error || !data.session) {
          // Jika tidak ada session, redirect ke login
          window.location.href = 'login.html';
          return;
        }
        
        // Tampilkan nama pengguna
        const {  userData } = await client.auth.getUser();
        if (userData?.user) {
          document.querySelectorAll('.user-name').forEach(el => {
            el.textContent = userData.user.email.split('@')[0];
          });
        }
        
        console.log('✅ Session valid. Pengguna terautentikasi.');
      } catch (error) {
        console.error('❌ Error verifikasi session:', error);
        alert('Terjadi kesalahan saat memverifikasi session. Silakan login kembali.');
        window.location.href = 'login.html';
      }
    }
    
    // Fungsi untuk ambil data dari API Proxy
    async function fetchFromApiProxy(endpoint, params) {
      try {
        const { data, error } = await client.functions.invoke('api-proxy', {
          body: { endpoint, params }
        });
        if (error) throw error;
        return data;
      } catch (error) {
        console.error(`API Proxy error (${endpoint}):`, error);
        throw error;
      }
    }
    
    // Fungsi untuk ambil data CoinGecko (tanpa API key)
    async function getCoinGeckoData() {
      try {
        return await fetchFromApiProxy('coingecko', {
          path: '/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=10'
        });
      } catch (error) {
        console.error('CoinGecko API error:', error);
        // Data dummy untuk development
        return [
          {
            id: 'bitcoin',
            symbol: 'btc',
            name: 'Bitcoin',
            current_price: 63450.00,
            price_change_percentage_24h: 2.3,
            market_cap: 1230000000000,
            total_volume: 28500000000,
            image: 'https://assets.coingecko.com/coins/images/1/large/bitcoin.png'
          },
          {
            id: 'ethereum',
            symbol: 'eth',
            name: 'Ethereum',
            current_price: 3450.00,
            price_change_percentage_24h: -1.2,
            market_cap: 415000000000,
            total_volume: 15200000000,
            image: 'https://assets.coingecko.com/coins/images/279/large/ethereum.png'
          },
          {
            id: 'solana',
            symbol: 'sol',
            name: 'Solana',
            current_price: 155.00,
            price_change_percentage_24h: 3.8,
            market_cap: 72000000000,
            total_volume: 35000000000,
            image: 'https://assets.coingecko.com/coins/images/4128/large/solana.png'
          },
          {
            id: 'cardano',
            symbol: 'ada',
            name: 'Cardano',
            current_price: 0.45,
            price_change_percentage_24h: -0.5,
            market_cap: 15500000000,
            total_volume: 520000000,
            image: 'https://assets.coingecko.com/coins/images/975/large/cardano.png'
          },
          {
            id: 'polkadot',
            symbol: 'dot',
            name: 'Polkadot',
            current_price: 6.25,
            price_change_percentage_24h: 1.8,
            market_cap: 7800000000,
            total_volume: 320000000,
            image: 'https://assets.coingecko.com/coins/images/12171/large/polkadot.png'
          },
          {
            id: 'dogecoin',
            symbol: 'doge',
            name: 'Dogecoin',
            current_price: 0.085,
            price_change_percentage_24h: -2.3,
            market_cap: 12000000000,
            total_volume: 3800000000,
            image: 'https://assets.coingecko.com/coins/images/5/large/dogecoin.png'
          },
          {
            id: 'shiba-inu',
            symbol: 'shib',
            name: 'Shiba Inu',
            current_price: 0.0000085,
            price_change_percentage_24h: -1.2,
            market_cap: 5000000000,
            total_volume: 300000000,
            image: 'https://assets.coingecko.com/coins/images/11939/large/shiba.png'
          },
          {
            id: 'chainlink',
            symbol: 'link',
            name: 'Chainlink',
            current_price: 7.25,
            price_change_percentage_24h: 0.8,
            market_cap: 4500000000,
            total_volume: 250000000,
            image: 'https://assets.coingecko.com/coins/images/877/large/chainlink-new-logo.png'
          },
          {
            id: 'uniswap',
            symbol: 'uni',
            name: 'Uniswap',
            current_price: 6.75,
            price_change_percentage_24h: 2.5,
            market_cap: 4200000000,
            total_volume: 180000000,
            image: 'https://assets.coingecko.com/coins/images/12504/large/uniswap-uni.png'
          },
          {
            id: 'matic-network',
            symbol: 'matic',
            name: 'Polygon',
            current_price: 0.85,
            price_change_percentage_24h: -0.3,
            market_cap: 7500000000,
            total_volume: 220000000,
            image: 'https://assets.coingecko.com/coins/images/4713/large/matic-token-icon.png'
          }
        ];
      }
    }
    
    // Fungsi untuk ambil data global
    async function getGlobalData() {
      try {
        const data = await fetchFromApiProxy('coingecko', {
          path: '/global'
        });
        return {
          total_market_cap: data.data.total_market_cap.usd,
          market_cap_change: data.data.market_cap_change_percentage_24h_usd,
          total_volume: data.data.total_volume.usd_24h,
          btc_dominance: data.data.market_cap_percentage.btc
        };
      } catch (error) {
        console.error('Global data error:', error);
        // Data dummy untuk development
        return {
          total_market_cap: 2850000000000,
          market_cap_change: 2.3,
          total_volume: 124000000000,
          btc_dominance: 52.3
        };
      }
    }
    
    // Fungsi untuk ambil Fear & Greed Index
    async function getFearAndGreedIndex() {
      try {
        const response = await fetch('https://api.alternative.me/fng/?limit=1');
        if (!response.ok) throw new Error('Fear & Greed API error');
        const data = await response.json();
        return {
          value: data.data[0].value,
          classification: data.data[0].value_classification
        };
      } catch (error) {
        console.error('Fear & Greed error:', error);
        // Data dummy untuk development
        return {
          value: 75,
          classification: 'Greed'
        };
      }
    }
    
    // Fungsi untuk ambil data AI Coin Rating
    async function getAICoinRating() {
      try {
        return await fetchFromApiProxy('ai-rating', {
          path: '/coins/rating'
        });
      } catch (error) {
        console.error('AI Coin Rating API error:', error);
        // Data dummy untuk development
        return [
          { id: 'bitcoin', name: 'Bitcoin', symbol: 'BTC', score: 8.7, prediction: 'Bullish', confidence: 85, potential: 'High' },
          { id: 'ethereum', name: 'Ethereum', symbol: 'ETH', score: 7.9, prediction: 'Neutral', confidence: 72, potential: 'Medium' },
          { id: 'solana', name: 'Solana', symbol: 'SOL', score: 9.2, prediction: 'Bullish', confidence: 92, potential: 'Very High' },
          { id: 'cardano', name: 'Cardano', symbol: 'ADA', score: 6.5, prediction: 'Bearish', confidence: 68, potential: 'Low' },
          { id: 'polkadot', name: 'Polkadot', symbol: 'DOT', score: 7.2, prediction: 'Neutral', confidence: 75, potential: 'Medium' }
        ];
      }
    }
    
    // Fungsi untuk ambil data Bad Wallet Tracker
    async function getBadWallets() {
      try {
        return await fetchFromApiProxy('bad-wallets', {
          path: '/wallets/monitoring'
        });
      } catch (error) {
        console.error('Bad Wallet Tracker API error:', error);
        // Data dummy untuk development
        return [
          { address: '0x742d35Cc6634C0532925a3b844Bc454e4438f44e', type: 'Scam', risk: 'High', lastActivity: '5 menit lalu', status: 'Active', confidence: 95 },
          { address: '0x552C2b9b7F7c8cDd395B8C6f59fCD059dCCB6774', type: 'Rug Pull', risk: 'High', lastActivity: '15 menit lalu', status: 'Active', confidence: 92 },
          { address: '0x3f5CE5FBFe3E9aF3971dDd433970E53c6c26eA1B', type: 'Phishing', risk: 'Medium', lastActivity: '1 jam lalu', status: 'Active', confidence: 78 },
          { address: '0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D', type: 'Scam', risk: 'Medium', lastActivity: '2 jam lalu', status: 'Active', confidence: 75 },
          { address: '0x95E6F48254609A6ee006F7D4930eDAd3533631E9', type: 'Rug Pull', risk: 'Low', lastActivity: '1 hari lalu', status: 'Inactive', confidence: 65 }
        ];
      }
    }
    
    // Fungsi untuk ambil data whale activity
    async function getWhaleActivity() {
      try {
        return await fetchFromApiProxy('on-chain', {
          path: '/whales/activity'
        });
      } catch (error) {
        console.error('Whale Activity API error:', error);
        // Data dummy untuk development
        return [
          { wallet: '0x742d...c6634', coin: 'BTC', amount: '1,250', value: '$80M', time: '5 menit lalu', type: 'buy' },
          { wallet: '0x552C...CD059', coin: 'ETH', amount: '50,000', value: '$150M', time: '12 menit lalu', type: 'sell' },
          { wallet: '0x3f5C...6c26e', coin: 'SOL', amount: '2,500,000', value: '$75M', time: '18 menit lalu', type: 'buy' }
        ];
      }
    }
    
    // Fungsi untuk ambil data transaksi besar
    async function getLargeTransactions() {
      try {
        return await fetchFromApiProxy('on-chain', {
          path: '/transactions/large'
        });
      } catch (error) {
        console.error('Large Transactions API error:', error);
        // Data dummy untuk development
        return [
          { hash: '0xa1b2...c3d4', from: '0x742d...c6634', to: '0x552C...CD059', coin: 'BTC', amount: '1,250', value: '$80M', time: '5 menit lalu' },
          { hash: '0xe5f6...g7h8', from: '0x3f5C...6c26e', to: '0x90ab...cdef1', coin: 'ETH', amount: '50,000', value: '$150M', time: '12 menit lalu' },
          { hash: '0x2345...6789', from: '0x1234...5678', to: '0x9abc...def0', coin: 'SOL', amount: '2,500,000', value: '$75M', time: '18 menit lalu' }
        ];
      }
    }
    
    // Fungsi untuk ambil sinyal trading
    async function getTradingSignals() {
      try {
        return await fetchFromApiProxy('trading', {
          path: '/signals'
        });
      } catch (error) {
        console.error('Trading Signals API error:', error);
        // Data dummy untuk development
        return [
          { coin: 'BTC', signal: 'BUY', strength: 85, reason: 'Breakout dari resistance utama', confidence: 92 },
          { coin: 'ETH', signal: 'HOLD', strength: 65, reason: 'Konsolidasi dalam range', confidence: 78 },
          { coin: 'SOL', signal: 'BUY', strength: 90, reason: 'Volume meningkat tajam', confidence: 87 }
        ];
      }
    }
    
    // Fungsi untuk ambil trading aktif
    async function getActiveTrades() {
      try {
        return await fetchFromApiProxy('trading', {
          path: '/trades/active'
        });
      } catch (error) {
        console.error('Active Trades API error:', error);
        // Data dummy untuk development
        return [
          { coin: 'BTC', entry: '$62,500', current: '$63,450', profit: '+1.52%', status: 'open', time: '2 jam lalu' },
          { coin: 'SOL', entry: '$150', current: '$155', profit: '+3.33%', status: 'open', time: '15 menit lalu' }
        ];
      }
    }
    
    // Fungsi untuk ambil riwayat trading
    async function getTradingHistory() {
      try {
        return await fetchFromApiProxy('trading', {
          path: '/trades/history'
        });
      } catch (error) {
        console.error('Trading History API error:', error);
        // Data dummy untuk development
        return [
          { coin: 'BTC', entry: '$61,200', exit: '$62,500', profit: '+2.12%', status: 'closed', time: '1 hari lalu' },
          { coin: 'ETH', entry: '$3,200', exit: '$3,400', profit: '+6.25%', status: 'closed', time: '2 hari lalu' },
          { coin: 'SOL', entry: '$120', exit: '$145', profit: '+20.83%', status: 'closed', time: '3 hari lalu' }
        ];
      }
    }
    
    // Fungsi untuk menghitung dev score
    function calculateDevScore(coin) {
      // Di versi nyata, ini akan mengambil dari GitHub API
      const scores = {
        bitcoin: 9.2,
        ethereum: 8.7,
        solana: 7.9
      };
      return scores[coin.id] || (Math.random() * 4 + 6).toFixed(1);
    }
    
    // Fungsi untuk warna skor
    function getScoreColor(score) {
      if (score < 4) return 'var(--negative-color)';
      if (score < 7) return 'var(--primary-color)';
      return 'var(--positive-color)';
    }
    
    // Fungsi untuk render tabel Market Fundamentals
    function renderMarketFundamentals(coins) {
      const gridBody = document.querySelector('.grid-body');
      if (!gridBody) return;
      
      gridBody.innerHTML = coins.map((coin, index) => `
        <div class="grid-row" data-coin-id="${coin.id}">
          <div class="cell rank">${index + 1}</div>
          <div class="cell coin">
            <div class="coin-icon">${coin.symbol.toUpperCase()}</div>
            <div>
              <div class="coin-name">${coin.name}</div>
              <div class="coin-symbol">${coin.symbol.toUpperCase()}</div>
            </div>
          </div>
          <div class="cell price">
            <div class="price-current">$${coin.current_price.toLocaleString('en-US', {maximumFractionDigits: 2})}</div>
            <div class="price-change ${coin.price_change_percentage_24h > 0 ? 'positive' : 'negative'}">
              ${coin.price_change_percentage_24h > 0 ? '▲' : '▼'} ${Math.abs(coin.price_change_percentage_24h).toFixed(2)}%
            </div>
          </div>
          <div class="cell change-24h ${coin.price_change_percentage_24h > 0 ? 'positive' : 'negative'}">
            ${coin.price_change_percentage_24h > 0 ? '+' : ''}${coin.price_change_percentage_24h.toFixed(2)}%
          </div>
          <div class="cell market-cap">
            $${(coin.market_cap / 1e9).toFixed(1)}B
          </div>
          <div class="cell volume">
            $${(coin.total_volume / 1e9).toFixed(1)}B
          </div>
          <div class="cell dev-score" style="color: ${getScoreColor(calculateDevScore(coin))};">
            <span class="premium-badge" title="Fitur premium">PRO</span>
            ${calculateDevScore(coin)}/10
          </div>
          <div class="cell community" style="color: ${getScoreColor(8.5)};">
            <span class="premium-badge" title="Fitur premium">PRO</span>
            8.5/10
          </div>
        </div>
      `).join('');
    }
    
    // Fungsi untuk update market overview
    async function updateMarketOverview() {
      try {
        const globalData = await getGlobalData();
        const fearGreed = await getFearAndGreedIndex();
        
        // Update market cap
        document.getElementById('total-market-cap').textContent = 
          `$${(globalData.total_market_cap / 1e12).toFixed(2)}T`;
        document.getElementById('market-cap-change').textContent = 
          `${globalData.market_cap_change > 0 ? '+' : ''}${globalData.market_cap_change.toFixed(1)}%`;
        document.getElementById('market-cap-change').className = 
          `overview-change ${globalData.market_cap_change > 0 ? 'positive' : 'negative'}`;
        
        // Update volume
        document.getElementById('total-volume').textContent = 
          `$${(globalData.total_volume / 1e9).toFixed(1)}B`;
        document.getElementById('volume-change').textContent = 
          `-1.7%`; // Data dummy untuk demo
        document.getElementById('volume-change').className = 'overview-change negative';
        
        // Update BTC dominance
        document.getElementById('btc-dominance').textContent = 
          `${globalData.btc_dominance.toFixed(1)}%`;
        document.getElementById('dominance-change').textContent = `+0.5%`;
        
        // Update Fear & Greed
        document.getElementById('fear-greed').textContent = fearGreed.value;
        document.getElementById('fear-greed-status').textContent = fearGreed.classification;
        
        // Set warna berdasarkan nilai
        const value = parseInt(fearGreed.value);
        let color;
        if (value < 30) color = 'var(--negative-color)';
        else if (value < 50) color = 'var(--primary-color)';
        else color = 'var(--positive-color)';
        document.getElementById('fear-greed').style.color = color;
      } catch (error) {
        console.error('Error updating market overview:', error);
      }
    }
    
    // Fungsi untuk render AI Coin Rating
    function renderAICoinRating(coins) {
      const ratingBody = document.querySelector('.ai-rating-body');
      if (!ratingBody) return;
      
      ratingBody.innerHTML = coins.map((coin, index) => `
        <div class="ai-rating-row">
          <div class="cell rank">${index + 1}</div>
          <div class="cell coin">
            <div class="coin-icon">${coin.symbol}</div>
            <div>
              <div class="coin-name">${coin.name}</div>
              <div class="coin-symbol">${coin.symbol.toUpperCase()}</div>
            </div>
          </div>
          <div class="cell score" style="color: ${getScoreColor(coin.score)};">
            ${coin.score.toFixed(1)}/10
          </div>
          <div class="cell prediction ${coin.prediction.toLowerCase()}">
            ${coin.prediction}
          </div>
          <div class="cell confidence">
            <div class="confidence-bar">
              <div class="confidence-fill" style="width: ${coin.confidence}%"></div>
            </div>
            ${coin.confidence}%
          </div>
          <div class="cell potential ${coin.potential.toLowerCase()}">
            ${coin.potential}
          </div>
        </div>
      `).join('');
    }
    
    // Fungsi untuk render Bad Wallet Tracker
    function renderBadWallets(wallets) {
      const walletBody = document.querySelector('.wallet-body');
      if (!walletBody) return;
      
      walletBody.innerHTML = wallets.map(wallet => `
        <div class="wallet-row">
          <div class="cell wallet-address">
            ${wallet.address.substring(0, 8)}...${wallet.address.substring(wallet.address.length - 6)}
            <div class="copy-icon" data-clipboard="${wallet.address}">📋</div>
          </div>
          <div class="cell type">${wallet.type}</div>
          <div class="cell risk ${wallet.risk.toLowerCase()}">${wallet.risk}</div>
          <div class="cell activity">${wallet.lastActivity}</div>
          <div class="cell status">
            <div class="status-indicator ${wallet.status.toLowerCase()}"></div>
            ${wallet.status}
          </div>
        </div>
      `).join('');
    }
    
    // Fungsi untuk render whale activity
    function renderWhaleActivity(whales) {
      const whaleList = document.querySelector('.whale-list');
      if (!whaleList) return;
      
      whaleList.innerHTML = whales.map(whale => `
        <div class="whale-item ${whale.type}">
          <div class="whale-icon">${whale.type === 'buy' ? '📈' : '📉'}</div>
          <div class="whale-info">
            <div class="whale-wallet">${whale.wallet}</div>
            <div class="whale-transaction">
              ${whale.amount} ${whale.coin} ($${whale.value})
            </div>
          </div>
          <div class="whale-time">${whale.time}</div>
        </div>
      `).join('');
    }
    
    // Fungsi untuk render transaksi besar
    function renderLargeTransactions(transactions) {
      const transactionList = document.querySelector('.transaction-list');
      if (!transactionList) return;
      
      transactionList.innerHTML = transactions.map(tx => `
        <div class="transaction-item">
          <div class="transaction-hash" title="${tx.hash}">${tx.hash.substring(0, 8)}...${tx.hash.substring(tx.hash.length - 6)}</div>
          <div class="transaction-from" title="${tx.from}">${tx.from.substring(0, 8)}...${tx.from.substring(tx.from.length - 6)}</div>
          <div class="transaction-to" title="${tx.to}">${tx.to.substring(0, 8)}...${tx.to.substring(tx.to.length - 6)}</div>
          <div class="transaction-amount">${tx.amount} ${tx.coin} ($${tx.value})</div>
          <div class="transaction-time">${tx.time}</div>
        </div>
      `).join('');
    }
    
    // Fungsi untuk render sinyal trading
    function renderTradingSignals(signals) {
      const signalList = document.querySelector('.signal-list');
      if (!signalList) return;
      
      signalList.innerHTML = signals.map(signal => `
        <div class="signal-item ${signal.signal.toLowerCase()}">
          <div class="signal-header">
            <div class="signal-coin">${signal.coin}</div>
            <div class="signal-strength">Kekuatan: ${signal.strength}%</div>
          </div>
          <div class="signal-content">
            <div class="signal-type">${signal.signal}</div>
            <div class="signal-reason">${signal.reason}</div>
            <div class="signal-confidence">Keyakinan: ${signal.confidence}%</div>
          </div>
        </div>
      `).join('');
    }
    
    // Fungsi untuk render trading aktif
    function renderActiveTrades(trades) {
      const tradeList = document.querySelector('.trade-list');
      if (!tradeList) return;
      
      if (trades.length === 0) {
        tradeList.innerHTML = `
          <div class="no-trades">
            <div>Tidak ada trading aktif</div>
            <div class="no-trades-sub">Aktifkan Auto-Trading untuk memulai</div>
          </div>
        `;
        return;
      }
      
      tradeList.innerHTML = trades.map(trade => `
        <div class="trade-item">
          <div class="trade-header">
            <div class="trade-coin">${trade.coin}</div>
            <div class="trade-profit ${trade.profit.startsWith('+') ? 'positive' : 'negative'}">
              ${trade.profit}
            </div>
          </div>
          <div class="trade-details">
            <div>Masuk: ${trade.entry}</div>
            <div>Sekarang: ${trade.current}</div>
            <div>Waktu: ${trade.time}</div>
          </div>
        </div>
      `).join('');
    }
    
    // Fungsi untuk render riwayat trading
    function renderTradingHistory(history) {
      const historyList = document.querySelector('.history-list');
      if (!historyList) return;
      
      historyList.innerHTML = history.map(trade => `
        <div class="trade-item">
          <div class="trade-header">
            <div class="trade-coin">${trade.coin}</div>
            <div class="trade-profit ${trade.profit.startsWith('+') ? 'positive' : 'negative'}">
              ${trade.profit}
            </div>
          </div>
          <div class="trade-details">
            <div>Masuk: ${trade.entry}</div>
            <div>Keluar: ${trade.exit}</div>
            <div>Waktu: ${trade.time}</div>
          </div>
        </div>
      `).join('');
    }
    
    // Fungsi untuk setup filter dan pencarian
    function setupFilters() {
      // Setup filter Market Fundamentals
      document.querySelectorAll('.filter-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          document.querySelectorAll('.filter-btn').forEach(b => 
            b.classList.remove('active'));
          btn.classList.add('active');
          console.log(`Filter diubah ke: ${btn.getAttribute('data-filter')}`);
          initMarketFundamentals();
        });
      });
      
      // Setup search Market Fundamentals
      const coinSearch = document.getElementById('coin-search');
      if (coinSearch) {
        coinSearch.addEventListener('input', (e) => {
          const term = e.target.value.toLowerCase();
          console.log(`Mencari koin: ${term}`);
          // Di versi nyata, sini akan ada logika pencarian
        });
      }
      
      // Setup search Bad Wallet Tracker
      const walletSearch = document.getElementById('wallet-search');
      if (walletSearch) {
        walletSearch.addEventListener('input', (e) => {
          const term = e.target.value.toLowerCase();
          console.log(`Mencari wallet: ${term}`);
          // Di versi nyata, sini akan ada logika pencarian
        });
      }
      
      // Setup copy to clipboard untuk wallet
      document.querySelectorAll('.copy-icon').forEach(icon => {
        icon.addEventListener('click', () => {
          const address = icon.getAttribute('data-clipboard');
          navigator.clipboard.writeText(address).then(() => {
            icon.textContent = '✓';
            setTimeout(() => {
              icon.textContent = '📋';
            }, 2000);
          });
        });
      });
      
      // Setup filter Bad Wallet Tracker
      document.querySelectorAll('.bad-wallet-tracker .filter-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          document.querySelectorAll('.bad-wallet-tracker .filter-btn').forEach(b => 
            b.classList.remove('active'));
          btn.classList.add('active');
          console.log(`Filter Bad Wallet diubah ke: ${btn.getAttribute('data-filter')}`);
          initBadWalletTracker();
        });
      });
    }
    
    // Fungsi untuk inisialisasi Market Fundamentals
    async function initMarketFundamentals() {
      try {
        // Tampilkan loading state
        const gridBody = document.querySelector('.grid-body');
        if (gridBody) {
          gridBody.innerHTML = `
            <div class="loading-state">
              <div class="loading-spinner"></div>
              <div>Mengambil data pasar real-time...</div>
            </div>
          `;
        }
        
        // Ambil data dari API
        const [coins,] = await Promise.all([
          getCoinGeckoData(),
          updateMarketOverview()
        ]);
        
        // Render tabel
        renderMarketFundamentals(coins);
        
        // Setup filter
        setupFilters();
        
        console.log('✅ Market Fundamentals berhasil diinisialisasi!');
      } catch (error) {
        console.error('❌ Gagal menginisialisasi Market Fundamentals:', error);
        
        // Tampilkan error
        const gridBody = document.querySelector('.grid-body');
        if (gridBody) {
          gridBody.innerHTML = `
            <div class="error-state">
              <div class="error-icon">❌</div>
              <div class="error-message">API ERROR - Tidak ada data real-time</div>
              <button class="btn-retry" onclick="initMarketFundamentals()">Coba Lagi</button>
            </div>
          `;
        }
      }
    }
    
    // Fungsi untuk inisialisasi AI Coin Rating
    async function initAICoinRating() {
      try {
        // Tampilkan loading state
        const ratingBody = document.querySelector('.ai-rating-body');
        if (ratingBody) {
          ratingBody.innerHTML = `
            <div class="loading-state">
              <div class="loading-spinner"></div>
              <div>Mengambil data analisis AI...</div>
            </div>
          `;
        }
        
        // Ambil data
        const coins = await getAICoinRating();
        
        // Render
        renderAICoinRating(coins);
        
        console.log('✅ AI Coin Rating berhasil diinisialisasi!');
      } catch (error) {
        console.error('❌ Gagal menginisialisasi AI Coin Rating:', error);
        
        // Tampilkan error
        const ratingBody = document.querySelector('.ai-rating-body');
        if (ratingBody) {
          ratingBody.innerHTML = `
            <div class="error-state">
              <div class="error-icon">❌</div>
              <div class="error-message">API ERROR - Tidak ada data AI</div>
              <button class="btn-retry" onclick="initAICoinRating()">Coba Lagi</button>
            </div>
          `;
        }
      }
    }
    
    // Fungsi untuk inisialisasi Bad Wallet Tracker
    async function initBadWalletTracker() {
      try {
        // Tampilkan loading state
        const walletBody = document.querySelector('.wallet-body');
        if (walletBody) {
          walletBody.innerHTML = `
            <div class="loading-state">
              <div class="loading-spinner"></div>
              <div>Mengambil data wallet berbahaya...</div>
            </div>
          `;
        }
        
        // Ambil data
        const wallets = await getBadWallets();
        
        // Render
        renderBadWallets(wallets);
        
        // Setup filter
        setupFilters();
        
        console.log('✅ Bad Wallet Tracker berhasil diinisialisasi!');
      } catch (error) {
        console.error('❌ Gagal menginisialisasi Bad Wallet Tracker:', error);
        
        // Tampilkan error
        const walletBody = document.querySelector('.wallet-body');
        if (walletBody) {
          walletBody.innerHTML = `
            <div class="error-state">
              <div class="error-icon">❌</div>
              <div class="error-message">API ERROR - Tidak ada data wallet berbahaya</div>
              <button class="btn-retry" onclick="initBadWalletTracker()">Coba Lagi</button>
            </div>
          `;
        }
      }
    }
    
    // Fungsi untuk inisialisasi On-Chain Analytics
    async function initOnChainAnalytics() {
      try {
        // Whale Activity
        const whales = await getWhaleActivity();
        renderWhaleActivity(whales);
        
        // Large Transactions
        const transactions = await getLargeTransactions();
        renderLargeTransactions(transactions);
        
        console.log('✅ On-Chain Analytics berhasil diinisialisasi!');
      } catch (error) {
        console.error('❌ Gagal menginisialisasi On-Chain Analytics:', error);
        
        // Tampilkan error di Whale Activity
        const whaleList = document.querySelector('.whale-list');
        if (whaleList) {
          whaleList.innerHTML = `
            <div class="error-state">
              <div class="error-icon">❌</div>
              <div class="error-message">API ERROR - Tidak ada data whale activity</div>
              <button class="btn-retry" onclick="initOnChainAnalytics()">Coba Lagi</button>
            </div>
          `;
        }
        
        // Tampilkan error di Large Transactions
        const transactionList = document.querySelector('.transaction-list');
        if (transactionList) {
          transactionList.innerHTML = `
            <div class="error-state">
              <div class="error-icon">❌</div>
              <div class="error-message">API ERROR - Tidak ada data transaksi besar</div>
              <button class="btn-retry" onclick="initOnChainAnalytics()">Coba Lagi</button>
            </div>
          `;
        }
      }
    }
    
    // Fungsi untuk inisialisasi Auto-Trading
    async function initAutoTrading() {
      try {
        // Trading Signals
        const signals = await getTradingSignals();
        renderTradingSignals(signals);
        
        // Active Trades
        const activeTrades = await getActiveTrades();
        renderActiveTrades(activeTrades);
        
        // Trading History
        const history = await getTradingHistory();
        renderTradingHistory(history);
        
        console.log('✅ Auto-Trading berhasil diinisialisasi!');
      } catch (error) {
        console.error('❌ Gagal menginisialisasi Auto-Trading:', error);
        
        // Tampilkan error di Trading Signals
        const signalList = document.querySelector('.signal-list');
        if (signalList) {
          signalList.innerHTML = `
            <div class="error-state">
              <div class="error-icon">❌</div>
              <div class="error-message">API ERROR - Tidak ada sinyal trading</div>
              <button class="btn-retry" onclick="initAutoTrading()">Coba Lagi</button>
            </div>
          `;
        }
        
        // Tampilkan error di Active Trades
        const tradeList = document.querySelector('.trade-list');
        if (tradeList) {
          tradeList.innerHTML = `
            <div class="error-state">
              <div class="error-icon">❌</div>
              <div class="error-message">API ERROR - Tidak ada trading aktif</div>
              <button class="btn-retry" onclick="initAutoTrading()">Coba Lagi</button>
            </div>
          `;
        }
        
        // Tampilkan error di Trading History
        const historyList = document.querySelector('.history-list');
        if (historyList) {
          historyList.innerHTML = `
            <div class="error-state">
              <div class="error-icon">❌</div>
              <div class="error-message">API ERROR - Tidak ada riwayat trading</div>
              <button class="btn-retry" onclick="initAutoTrading()">Coba Lagi</button>
            </div>
          `;
        }
      }
    }
    
    // Fungsi untuk toggle auto-trading
    function setupAutoTrading() {
      document.getElementById('toggle-trading').addEventListener('click', async () => {
        const statusLight = document.getElementById('trading-status');
        const statusText = document.getElementById('trading-status-text');
        const toggleBtn = document.getElementById('toggle-trading');
        
        if (statusText.textContent === 'Auto-Trading Dimatikan') {
          // Aktifkan auto-trading
          statusLight.style.backgroundColor = 'var(--positive-color)';
          statusText.textContent = 'Auto-Trading Aktif';
          toggleBtn.textContent = 'Nonaktifkan Auto-Trading';
          
          // Simulasi trading
          simulateTrading();
        } else {
          // Nonaktifkan auto-trading
          statusLight.style.backgroundColor = '#666';
          statusText.textContent = 'Auto-Trading Dimatikan';
          toggleBtn.textContent = 'Aktifkan Auto-Trading';
        }
      });
    }
    
    // Fungsi simulasi trading
    function simulateTrading() {
      console.log('🔄 Auto-Trading diaktifkan. Memulai simulasi trading...');
      
      // Simulasi perubahan status secara berkala
      const statusLight = document.getElementById('trading-status');
      const statusText = document.getElementById('trading-status-text');
      
      // Simulasi sinyal trading baru
      setTimeout(() => {
        if (statusText.textContent === 'Auto-Trading Aktif') {
          console.log('💡 Sinyal trading baru terdeteksi!');
          initAutoTrading();
        }
      }, 5000);
      
      // Simulasi aktivitas trading
      setInterval(() => {
        if (statusText.textContent === 'Auto-Trading Aktif') {
          // Hanya update jika masih aktif
          initAutoTrading();
        }
      }, 30000); // Update setiap 30 detik
    }
    
    // Fungsi untuk setup notifikasi
    function setupNotifications() {
      const notificationBtn = document.getElementById('notification-btn');
      const notificationPanel = document.getElementById('notification-panel');
      const notificationCount = document.getElementById('notification-count');
      
      // Toggle panel notifikasi
      notificationBtn.addEventListener('click', () => {
        notificationPanel.style.display = notificationPanel.style.display === 'block' ? 'none' : 'block';
      });
      
      // Tutup panel saat klik di luar
      document.addEventListener('click', (e) => {
        if (!notificationPanel.contains(e.target) && e.target !== notificationBtn) {
          notificationPanel.style.display = 'none';
        }
      });
      
      // Tandai semua telah dibaca
      document.getElementById('mark-all-read').addEventListener('click', () => {
        document.querySelectorAll('.notification-item.new').forEach(item => {
          item.classList.remove('new');
        });
        notificationCount.textContent = '0';
      });
      
      // Simulasi notifikasi baru
      setTimeout(() => {
        if (notificationCount.textContent === '3') {
          notificationCount.textContent = '4';
          const newNotification = `
            <div class="notification-item new">
              <div class="notification-icon positive">📈</div>
              <div class="notification-content">
                <div class="notification-title">New Bull Run Detected</div>
                <div class="notification-message">Market sedang memasuki fase bull run baru</div>
                <div class="notification-time">Baru</div>
              </div>
            </div>
          `;
          document.querySelector('.notification-list').insertAdjacentHTML('afterbegin', newNotification);
        }
      }, 15000);
    }
    
    // Fungsi untuk setup logout
    function setupLogout() {
      document.querySelectorAll('.btn-logout').forEach(btn => {
        btn.addEventListener('click', async () => {
          if (confirm('Anda yakin ingin keluar?')) {
            await client.auth.signOut();
            window.location.href = 'login.html';
          }
        });
      });
    }
    
    // Inisialisasi semua komponen setelah halaman dimuat
    document.addEventListener('DOMContentLoaded', async () => {
      // Verifikasi session terlebih dahulu
      await verifySession();
      
      // Inisialisasi semua fitur
      initMarketFundamentals();
      initAICoinRating();
      initBadWalletTracker();
      initOnChainAnalytics();
      initAutoTrading();
      
      // Setup fungsi tambahan
      setupAutoTrading();
      setupNotifications();
      setupLogout();
      
      // Update data setiap 5 menit
      setInterval(initMarketFundamentals, 5 * 60 * 1000);
      setInterval(initAICoinRating, 5 * 60 * 1000);
      setInterval(initBadWalletTracker, 5 * 60 * 1000);
      setInterval(initOnChainAnalytics, 5 * 60 * 1000);
      setInterval(initAutoTrading, 5 * 60 * 1000);
    });
  </script>
</body>
</html>
